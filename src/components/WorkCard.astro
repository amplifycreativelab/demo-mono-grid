---
import type { CollectionEntry } from "astro:content";
import { Image } from "astro:assets";

interface Props {
    work: CollectionEntry<"work">;
}

const { work } = Astro.props;
const siteBase = import.meta.env.BASE_URL;

// Ensure consistent path link
const link = `${siteBase}work/${work.slug}`;
---

<a href={link} class="work-card">
    <div class="image-wrapper">
        <Image
            src={work.data.cover}
            alt={work.data.title}
            width={800}
            height={600}
            format="webp"
            quality={90}
        />
    </div>
    <div class="meta">
        <h3>{work.data.title}</h3>
        <span class="details">{work.data.location} â€” {work.data.year}</span>
    </div>
</a>

<style>
    .work-card {
        display: block;
        text-decoration: none;
    }

    .image-wrapper {
        overflow: hidden;
        margin-bottom: var(--space-2);
        background-color: var(
            --color-white-stone
        ); /* contrast adjustment if needed */
        position: relative;
        aspect-ratio: 4/3;
    }

    .image-wrapper img {
        width: 100%;
        height: 100%;
        object-fit: cover;
        transition: transform 0.6s cubic-bezier(0.22, 1, 0.36, 1);
        display: block;
    }

    .work-card:hover .image-wrapper img {
        transform: scale(1.03);
    }

    .meta {
        display: flex;
        flex-direction: column;
        gap: 4px;
        border-top: 1px solid transparent; /* reserved space for a line if wanted */
        padding-top: var(--space-1);
        transition: padding-left 0.2s ease;
    }

    .work-card:hover .meta {
        padding-left: var(--space-1);
        border-color: var(
            --color-oxide
        ); /* Maybe too much? "Oxide Accent (sparingly)" */
        border-top: 1px solid var(--color-oxide);
    }

    .meta h3 {
        font-size: 1rem;
        margin: 0;
        font-weight: 500;
        color: var(--color-ink);
    }

    .meta .details {
        font-size: 0.8125rem; /* ~13px */
        color: var(--color-muted-ink);
        letter-spacing: 0.02em;
    }
</style>
